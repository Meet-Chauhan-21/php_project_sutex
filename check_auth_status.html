<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentication Status Checker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        .status {
            margin: 20px 0;
            padding: 15px;
            border-radius: 5px;
        }
        .status.success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .status.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .data-item {
            margin: 10px 0;
            padding: 10px;
            background: #f8f9fa;
            border-left: 3px solid #4CAF50;
        }
        .data-item strong {
            display: inline-block;
            width: 200px;
        }
        .btn {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        .btn-primary {
            background: #4CAF50;
            color: white;
        }
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        .btn-info {
            background: #17a2b8;
            color: white;
        }
        .actions {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #eee;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê Authentication Status Checker</h1>
        
        <div id="authStatus"></div>
        
        <div id="localStorageData"></div>
        
        <div class="actions">
            <h3>Quick Actions</h3>
            <button class="btn btn-primary" onclick="setAuthTrue()">Set Auth to TRUE</button>
            <button class="btn btn-danger" onclick="clearAuth()">Clear All Auth Data</button>
            <button class="btn btn-info" onclick="location.reload()">Refresh</button>
            <button class="btn btn-info" onclick="window.location.href='admission.html?program=BCA'">Go to Admission</button>
            <button class="btn btn-info" onclick="window.location.href='login.html'">Go to Login</button>
        </div>
    </div>

    <script>
        function checkAuthStatus() {
            const userLoggedIn = localStorage.getItem('userLoggedIn');
            const userEmail = localStorage.getItem('userEmail');
            const userName = localStorage.getItem('userName');
            const userId = localStorage.getItem('userId');
            const sessionData = localStorage.getItem('vidyaGuruSession');
            const loginMethod = localStorage.getItem('loginMethod');
            const userPicture = localStorage.getItem('userPicture');
            
            // Determine authentication status
            const isAuthenticated = userLoggedIn === 'true' || userEmail || sessionData;
            
            // Display status
            const statusDiv = document.getElementById('authStatus');
            statusDiv.className = `status ${isAuthenticated ? 'success' : 'error'}`;
            statusDiv.innerHTML = `
                <h2>${isAuthenticated ? '‚úÖ User is Authenticated' : '‚ùå User is NOT Authenticated'}</h2>
                <p>${isAuthenticated ? 'You should be able to access the admission page.' : 'You need to login to access the admission page.'}</p>
            `;
            
            // Display all localStorage data
            const dataDiv = document.getElementById('localStorageData');
            dataDiv.innerHTML = `
                <h3>LocalStorage Data:</h3>
                <div class="data-item"><strong>userLoggedIn:</strong> ${userLoggedIn || '<em style="color: red;">NOT SET</em>'}</div>
                <div class="data-item"><strong>userEmail:</strong> ${userEmail || '<em style="color: red;">NOT SET</em>'}</div>
                <div class="data-item"><strong>userName:</strong> ${userName || '<em style="color: red;">NOT SET</em>'}</div>
                <div class="data-item"><strong>userId:</strong> ${userId || '<em style="color: red;">NOT SET</em>'}</div>
                <div class="data-item"><strong>loginMethod:</strong> ${loginMethod || '<em style="color: red;">NOT SET</em>'}</div>
                <div class="data-item"><strong>userPicture:</strong> ${userPicture ? '‚úÖ Set' : '<em style="color: red;">NOT SET</em>'}</div>
                <div class="data-item"><strong>vidyaGuruSession:</strong> ${sessionData ? '‚úÖ Set' : '<em style="color: red;">NOT SET</em>'}</div>
                ${sessionData ? `<div class="data-item"><strong>Session Details:</strong> <pre>${JSON.stringify(JSON.parse(sessionData), null, 2)}</pre></div>` : ''}
                
                <h4>All localStorage Keys:</h4>
                <div class="data-item">${Object.keys(localStorage).join(', ') || '<em>No keys found</em>'}</div>
            `;
        }
        
        function setAuthTrue() {
            localStorage.setItem('userLoggedIn', 'true');
            localStorage.setItem('userEmail', 'test@example.com');
            localStorage.setItem('userName', 'Test User');
            localStorage.setItem('userId', '1');
            alert('Authentication data has been set! Refreshing...');
            location.reload();
        }
        
        function clearAuth() {
            if (confirm('Are you sure you want to clear all authentication data?')) {
                localStorage.removeItem('userLoggedIn');
                localStorage.removeItem('userEmail');
                localStorage.removeItem('userName');
                localStorage.removeItem('userId');
                localStorage.removeItem('vidyaGuruSession');
                localStorage.removeItem('loginMethod');
                localStorage.removeItem('userPicture');
                alert('All authentication data cleared! Refreshing...');
                location.reload();
            }
        }
        
        // Run on page load
        checkAuthStatus();
    </script>
</body>
</html>
